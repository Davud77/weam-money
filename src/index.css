@import url('https://fonts.googleapis.com/css2?family=Onest:wght@100..900&display=swap');

/* ==========================================================================
   1) ROOT VARIABLES & BASE
   ========================================================================== */
:root {
  /* Color Scheme */
  color-scheme: dark;

  /* Surfaces */
  --page-bg: #1f1f22;
  --sidebar-bg: #17191b;
  --card-bg: #121416;
  --head-bg: #14181e;
  --head-bg-2: #14181d;
  --menu-bg: #0f1318;
  
  /* Text & Icons */
  --text: #ffffff;
  --text-soft: #868a91;
  --icon: var(--text-soft);
  --menu-text: #e2e8f0;

  /* Accents */
  --primary: #1b47a2;
  --primary-25: rgba(12, 104, 255, 0.25);
  
  /* Semantic Colors */
  --warn: #251a2d;
  --danger: #b45227;
  --success: #24904b;
  --success-300: #8fd39a;
  --danger-300: #ffb067;
  --danger-400: #ff6b6b;

  /* Borders & Lines */
  --line-weak: #1f252a;
  --border: #313742;

  /* UI Dimensions & Radius */
  --header-h: 50px;
  --title-h: 1rem;
  --gap_s: 4px;
  --gap_m: 8px;
  --gap_l: 16px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius: 8px; /* Used in sidebar/modals */

  /* Status Colors (Gantt/Board) */
  --status-assigned-fg: #b0c4cf;
  --status-inprogress-fg: #7fb1ff;
  --status-review-fg: #c9a3e7;
  --status-pause-fg: #ffb067;
  --status-done-fg: #8fd39a;
  
  /* Interaction */
  --click-bg: rgba(0, 72, 255, 0.5);
  --active-bg: #ffffff14;
  --card-overlay-90: rgba(18, 20, 22, 0.90);

  /* Fonts */
  --font-sans: 'Onest', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

/* Base Resets */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }

body {
  margin: 0;
  background: var(--page-bg);
  color: var(--text);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code { font-family: var(--font-mono); }

/* Selection & Focus */
::selection { background: color-mix(in oklab, var(--primary) 35%, transparent); color: var(--text); }
:focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; border-radius: 6px; }

/* Scrollbar */
html { scrollbar-color: var(--border) var(--card-bg); scrollbar-width: thin; }
html::-webkit-scrollbar { width: 10px; height: 10px; }
html::-webkit-scrollbar-track { background: var(--card-bg); }
html::-webkit-scrollbar-thumb { background: var(--border); }

/* ==========================================================================
   2) LAYOUT & COMMON COMPONENTS
   ========================================================================== */

/* Page Structure */
.page-container {
  min-height: 100vh;
  background: var(--page-bg);
  display: flex;
  flex-direction: column;
}

.content {
  padding: 16px;
  margin: 0 auto;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 16px;
  flex: 1; /* Ensures content fills space */
}

.header {
  height: var(--header-h);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-inline: 16px;
  flex-shrink: 0;
}

.header_block {
  display: flex;
  align-items: center;
  gap: 10px;
}

.actions-block {
  display: flex;
  gap: 5px;
  align-items: center;
}

.actions-block-wrap {
  flex-wrap: wrap;
}


/* Typography */
h2 { margin: 0; font-size: 1.25rem; font-weight: 700; }
h3 { margin: 0; font-size: 1.1rem; font-weight: 600; }

.text-soft { color: var(--text-soft); }
.text-strong { color: var(--text); font-weight: 600; }
.text-success { color: var(--success); }
.text-danger { color: var(--danger); }
.text-primary { color: var(--primary); }
.text-xs { font-size: 0.75rem; }
.text-xl { font-size: 1.25rem; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.font-bold { font-weight: 700; }
.font-mono { font-family: var(--font-mono); }
.truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.text-ellipsis { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.wrap-text { white-space: normal; word-break: break-word; max-width: 300px; }

/* Utilities */
.block {
  background: var(--card-bg);
  border-radius: var(--radius-md);
  padding: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 10px 40px #00000080;
  overflow: auto;
}

.flex { display: flex; gap: var(--gap_m); }
.relative { position: relative; }
.w-full { width: 100%; }
.mt-2 { margin-top: 8px; }
.mt-4 { margin-top: 16px; }
.mb-2 { margin-bottom: 16px; }
.mb-4 { margin-bottom: 16px; }
.mr-1 { margin-right: 4px; }
.mr-2 { margin-right: 8px; }
.pt-2 { padding-top: 8px; }
.border-b { border-bottom: 1px solid var(--border); }
.border-white-5 { border-color: rgba(255,255,255,0.05); }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  color: var(--text-soft);
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn:hover {
  border-color: var(--primary);
  color: var(--text);
  background: rgba(32, 160, 255, 0.05);
}

.btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}

.btn.secondary {
  /* Inherits base btn styles, semantic naming */
}

.btn.danger {
  border-color: var(--danger);
  color: var(--danger);
}
.btn.danger:hover {
  background: rgba(180, 82, 39, 0.1);
}

.icon-btn {
  background: transparent;
  border: none;
  color: var(--text-soft);
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.icon-btn:hover { background: rgba(255,255,255,0.1); color: var(--text); }
.icon-btn.danger:hover { background: rgba(239, 83, 80, 0.2); color: var(--danger); }
.icon-btn.tiny { padding: 4px; }

/* Filter Chips (Dashboard, Gantt, Transactions) */
.chip-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  color: var(--text-soft);
  padding: 10px 12px;
  border-radius: 20px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
  white-space: nowrap;
}

.chip-btn:hover { border-color: var(--primary); color: var(--text); background: rgba(32, 160, 255, 0.05); }
.chip-btn.active { background: var(--primary); border-color: var(--primary); color: #fff; }

.filtr {
  display: flex;
  gap: 8px;
  position: relative;
  overflow-x: auto;
  flex-wrap: nowrap;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding-bottom: 4px; /* for scrollbar spacing */
}
.filtr::-webkit-scrollbar { display: none; }

/* Dropdowns */
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 8px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  z-index: 100;
  display: flex;
  flex-direction: column;
  padding: 8px;
  gap: var(--gap_m);
  max-width: 350px;
}

.dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.1s;
}
.dropdown-item:hover { background: rgba(255,255,255,0.05); }

.chip-choice {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-soft);
  padding: 6px;
  border-radius: 4px;
  font-size: 1.2rem;
  cursor: pointer;
}
.chip-choice:hover { border-color: var(--primary); color: var(--text); }
.chip-choice.active { background: var(--primary); border-color: var(--primary); color: white; }

.checkbox-label { font-size: 0.9rem; user-select: none; }
.checkbox-label input { margin: 0; }

/* Inputs & Forms */
.input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
}
.input-label {
  font-size: 0.85rem;
  color: var(--text-soft);
}
.input {
  height: 36px;
  background: var(--head-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  padding: 0 12px;
  width: 100%;
  font-size: 0.95rem;
}
.input:focus { border-color: var(--primary); outline: none; }
.input.sm { height: 30px; font-size: 0.85rem; }
textarea.input { height: auto; padding: 8px 12px; resize: vertical; }


.range-slider { -webkit-appearance: none; appearance: none; }
.range-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 12px; height: 12px; border-radius: 50%; background: #fff; cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,0.5); }

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.badge-primary { background: rgba(32, 160, 255, 0.2); color: var(--primary); border: 1px solid rgba(32, 160, 255, 0.4); }
.badge-info { background: rgba(56, 139, 253, 0.15); color: #7fb1ff; border: 1px solid rgba(56, 139, 253, 0.4); }
.badge-warning { background: rgba(201, 163, 231, 0.15); color: #c9a3e7; border: 1px solid rgba(201, 163, 231, 0.4); }
.badge-danger { background: rgba(255, 40, 40, 0.15); color: var(--danger); border: 1px solid rgba(255, 40, 40, 0.4); }
.badge-success { background: rgba(41, 193, 126, 0.15); color: var(--success); border: 1px solid rgba(41, 193, 126, 0.4); }
.badge-secondary { background: var(--line-weak); color: var(--text-soft); }

/* Tables */
.table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
}
.table th {
  text-align: left;
  padding: 12px 16px;
  color: var(--text-soft);
  font-weight: 500;
  border-bottom: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
}
.table td {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  vertical-align: middle;
}
.table tr:last-child td { border-bottom: none; }
.table tr:hover td { background: rgba(255, 255, 255, 0.03); }
.sticky-header thead th { background: var(--card-bg); box-shadow: 0 1px 0 var(--border); }

/* Modals */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.modal-content {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  width: 100%;
  max-width: 500px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  animation: modalSlide 0.2s ease-out;
  display: flex;
  flex-direction: column;
  max-height: 90vh;
}
@keyframes modalSlide { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.modal-header {
  padding: 16px 24px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.modal-body { padding: 24px; overflow-y: auto; }
.modal-body-content-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.1s;
}
.modal-footer {
  padding: 16px 24px;
  border-top: 1px solid rgba(255,255,255,0.05);
  background: rgba(0,0,0,0.2);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  border-radius: 0 0 var(--radius) var(--radius);
}

/* ==========================================================================
   3) SIDEBAR (AppSidebar.tsx)
   ========================================================================== */
.sidebar {
  display: flex;
  flex-direction: column;
  background-color: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  height: 100vh;
  width: 240px;
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: sticky;
  top: 0;
  left: 0;
  flex-shrink: 0;
  z-index: 50;
  overflow-x: hidden;
}
.sidebar.collapsed { width: 72px; }

.sidebar-header {
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.sidebar-logo {
  font-weight: 700;
  font-size: 1.25rem;
  color: var(--primary);
  letter-spacing: 1px;
}

.sidebar-nav {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 16px 12px;
  gap: 8px;
  position: relative;
}

.nav-item {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  height: 40px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  color: var(--text-soft);
  transition: color 0.2s;
  z-index: 2;
  overflow: hidden;
}
.nav-item:hover { color: var(--text); }
.nav-item.active { color: #fff; }
.nav-item.secondary { margin-top: auto; }

.nav-icon {
  width: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.nav-label {
  font-size: 0.95rem;
  font-weight: 500;
  white-space: nowrap;
  opacity: 1;
  transition: opacity 0.2s;
}
.sidebar.collapsed .nav-label { opacity: 0; width: 0; pointer-events: none; }

.sidebar-glow {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  background: rgba(32, 160, 255, 0.15);
  border-radius: var(--radius);
  pointer-events: none;
  transition: transform 0.25s cubic-bezier(0.2, 0, 0, 1);
  z-index: 1;
}
.sidebar-glow::before {
  content: '';
  position: absolute;
  left: 0;
  top: 10%;
  bottom: 10%;
  width: 3px;
  background: var(--primary);
  border-radius: 0 4px 4px 0;
  opacity: 0.8;
  box-shadow: 0 0 10px var(--primary);
}
.sidebar-glow.pressed { opacity: 0.5; }

.sidebar-footer {
  padding: 16px 12px;
  border-top: 1px solid rgba(255,255,255,0.05);
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* ==========================================================================
   4) DASHBOARD
   ========================================================================== */
.dashboard-page { /* Styles handled by common layout */ }

.kpi-block {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  flex-wrap: wrap;
}
.kpi-card {
  display: flex;
  flex-direction: column;
  padding: 16px;
  min-height: 120px;
  position: relative;
  overflow: hidden;
  background: var(--card-bg);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  flex: 1;
  min-width: 220px;
}
.kpi-title {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-soft);
  margin-bottom: 4px;
}
.kpi-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 8px;
}
.kpi-sublines {
  font-size: 0.75rem;
  color: var(--text-soft);
  z-index: 2;
  position: relative;
}
.spark-container {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px;
  opacity: 0.8;
  pointer-events: none;
  z-index: 1;
}

.dashboard-analytics-grid {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 16px;
}
.dashboard-analytics-card { width: 49%; }

/* Chart Tooltip */
.chart-tooltip {
  background: var(--sidebar-bg);
  border: 1px solid var(--border);
  padding: 8px 12px;
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  font-size: 0.85rem;
}
.tooltip-date { color: var(--text-soft); margin-bottom: 4px; }
.tooltip-val { font-weight: 700; font-size: 1rem; color: var(--text); }
.tooltip-sub { color: var(--primary); font-size: 0.8rem; margin-top: 2px; }
.tooltip-note { font-style: italic; color: var(--text-soft); font-size: 0.75rem; max-width: 200px; margin-top: 4px; }

/* ==========================================================================
   5) PROJECTS LIST
   ========================================================================== */

.contractor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  cursor: pointer;
  user-select: none;
  transition: background 0.2s;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
}
.contractor-header:hover { background: var(--head-bg-2); }
.contractor-header-spoler { display: flex; align-items: center; gap: 8px; }

.projects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
  padding-left: 12px;
}
.project-card {
  background: var(--sidebar-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  cursor: pointer;
  transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
  display: flex;
  flex-direction: column;
}
.project-card:hover {
  transform: translateY(-2px);
  border-color: var(--primary);
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.project-card-title { display: flex; gap: 10px; align-items: center; margin-bottom: 8px; }
.project-card-cont { display: flex; flex-direction: column; gap: 5px; }
.project-card-text { display: flex; gap: 10px; font-size: 0.85rem; align-items: center; color: var(--text-soft); }

/* ==========================================================================
   6) PROJECT DETAIL
   ========================================================================== */
.pd-page {
  height: 100vh;
  overflow: hidden; /* Main scroll handled by content */
}
.pd-content {
  flex-direction: row;
  height: calc(100vh - var(--header-h));
  overflow: hidden;
}

/* Sidebar in Project Detail */
.pd-sidebar {
  width: 20%;
  height: 100%;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow-y: auto;
}
.pd-nav-item {
  padding: 12px 16px;
  cursor: pointer;
  border-left: 3px solid transparent;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.pd-nav-item:hover { background: rgba(255, 255, 255, 0.05); }
.pd-nav-item.active { background: rgba(32, 160, 255, 0.1); border-left-color: var(--primary); }

.projectdetailmain {
  display: flex;
  flex-direction: column;
  gap: 16px;
  flex: 1;
  overflow-y: auto;
}


.projectdetailcard {
  min-height: 30%;
}

.pd-stats {
  padding: 24px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.projectdetail-kpis {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  justify-content: space-around;
  flex-wrap: wrap;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.component-kpi { display: flex; flex-direction: column-reverse; align-items: center; }
.component-kpi-title { font-size: 2rem; font-weight: 700; }
.component-kpi-text { font-size: 0.85rem; color: var(--text-soft); }

/* ==========================================================================
   7) BOARD / KANBAN
   ========================================================================== */
.board-page { height: 100vh; overflow: hidden; }
.board-scroll-container {
  overflow-x: auto;
  overflow-y: hidden;
  height: 100%;
  padding-bottom: 16px;
}
.board-columns {
  display: flex;
  gap: 16px;
  height: 100%;
}

.range-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.kanban-col {
  background: var(--head-bg);
  border-radius: 16px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-width: 280px;
  width: 280px;
  flex-shrink: 0;
}
.kanban-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}
.kanban-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-right: 4px;
}
/* Scrollbar specific for kanban lists */
.kanban-list::-webkit-scrollbar { width: 6px; }
.kanban-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

.board-card {
  padding: 12px;
  border-radius: 12px;
  background: var(--card-bg);
  cursor: grab;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid transparent;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.board-card:hover { border-color: var(--primary); }
.board-card.readonly { cursor: default; }
.board-card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; }

.board-card-userdate {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.board-card-progress-labels {
  display: flex;
  align-items: center;
  justify-content: space-between;
}








/* ==========================================================================
   8) GANTT
   ========================================================================== */
.gantt-page { 
  height: 100vh; 
  overflow: hidden; /* Страница не скроллится целиком */
  display: flex; 
  flex-direction: column; 
}

.gantt-container {
  flex: 1;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  /* Разрешаем скролл внутри контейнера */
  overflow: visible; 
  position: relative;
  min-height: 0; /* Критично для flex-контейнеров */
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

/* Шапка таблицы (Левая часть: Проект / Исполнитель / Статус) */
.gantt-header-row {
  display: flex;
  background: var(--sidebar-bg);
  border-bottom: 1px solid var(--border);
  align-items: center;
  font-weight: 600;
  color: var(--text-soft);
  font-size: 0.85rem;
}

/* Тело таблицы (Левая часть) */
.gantt-table-body { 
  /* Разрешаем скролл, чтобы список задач был виден */
  overflow: visible; 
}

/* Строка таблицы */
.gantt-row {
  display: flex;
  align-items: center;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  transition: background 0.1s;
}
.gantt-row:hover { background: rgba(255,255,255,0.02); }
.gantt-row.row-group { background: rgba(32, 160, 255, 0.03); }

/* Ячейки */
.gantt-cell { padding: 0 12px; display: flex; align-items: center; overflow: hidden; }
.cell-main { flex: 1; min-width: 0; gap: 8px; font-size: 0.9rem; }
.cell-user { width: 120px; flex-shrink: 0; border-left: 1px solid rgba(255,255,255,0.05); }
.cell-status { width: 100px; flex-shrink: 0; border-left: 1px solid rgba(255,255,255,0.05); justify-content: center; }
.expander-icon { color: var(--text-soft); display: flex; margin-right: 4px; }

/* Группа кнопок переключения вида (День/Неделя/Месяц) */
.btn-group {
  display: flex;
  background: var(--sidebar-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2px;
}
.btn-group-item {
  background: transparent;
  border: none;
  color: var(--text-soft);
  padding: 8px 12px;
  font-size: 0.85rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-group-item:hover { color: var(--text); }
.btn-group-item.active { background: var(--card-bg); color: var(--primary); box-shadow: 0 1px 3px rgba(0,0,0,0.2); }


/* ==========================================================================
   GANTT: GLOBAL LIBRARY OVERRIDES (STABLE SELECTORS)
   ========================================================================== */

/* 1. Сетка и Строки (Grid Area) */
/* Фон строк (замена белого) */
.gantt-container .grid .rows rect {
  fill: var(--card-bg) !important;
}
/* Зебра для строк (замена светло-серого) */
.gantt-container .grid .rows rect:nth-child(even) {
  fill: var(--head-bg) !important;
}
/* Линии сетки (горизонтальные и вертикальные) */
.gantt-container .grid .rowLines line,
.gantt-container .grid .ticks line {
  stroke: var(--border) !important;
}
/* Линия "Сегодня" (широкая подсветка) */
.gantt-container .grid .today rect {
  fill: rgba(32, 160, 255, 0.05) !important;
}
/* Линия "Сегодня" (вертикальная черта) */
.gantt-container line[stroke-dasharray] { 
  stroke: var(--primary) !important; 
  stroke-width: 2px !important; 
  opacity: 0.6 !important; 
}

/* 2. Календарь (Шапка - Header) */
/* Фон всей шапки (исправление белого цвета) */
.gantt-container .calendar > rect {
  fill: var(--sidebar-bg) !important;
  stroke: none !important;
}
/* Текст месяцев и дат */
.gantt-container .calendar text {
  fill: var(--text-soft) !important;
  font-weight: 600 !important;
}
/* Разделительные линии в шапке */
.gantt-container .calendar line {
  stroke: var(--border) !important;
}

/* 3. Задачи (Bars) */
/* Текст названия задачи рядом с полоской */
.gantt-container .bar text {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  fill: var(--text) !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  pointer-events: none !important;
}

/* Скрытие лишних полигонов (треугольники/ромбики связей) */
.gantt-container .bar polygon {
  display: none !important;
}

/* Скрытие прозрачных прямоугольников-оберток (чистим визуальный мусор) */
.gantt-container .bar rect[fill="transparent"] {
  display: none !important;
}

/* 4. Ручки управления (Handles для ресайза) */
.gantt-container .handleGroup rect {
  fill: rgba(255, 255, 255, 0.5) !important;
  width: 6px !important;
  height: 22px !important;
  rx: 2px !important;
  ry: 2px !important;
  cursor: ew-resize !important;
  /* Центрируем ручку по высоте */
  transform: translateY(4px) !important; 
}

/* Скрываем полигоны в ручках (если они есть) */
.gantt-container .handleGroup polygon {
  display: none !important;
}


/* ==========================================================================
   8) GANTT
   ========================================================================== */
.gantt-page { 
  height: 100vh; 
  overflow: hidden; /* Запрещаем скролл всей страницы */
  display: flex; 
  flex-direction: column; 
}

/* ВАЖНО: Ограничиваем контент внутри страницы, чтобы скролл появился у дочернего элемента */
.gantt-page .content {
  flex: 1;
  min-height: 0;      /* Магия Flexbox: позволяет блоку сжиматься меньше содержимого */
  overflow: hidden;   /* Скрываем всё, что вылезает за пределы области контента */
  display: flex;
  flex-direction: column;
  padding-bottom: 0;  /* Убираем нижний отступ, чтобы скролл был внутри карточки */
}

.gantt-container {
  flex: 1;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  
  /* ВКЛЮЧАЕМ СКРОЛЛ */
  overflow: auto !important; /* auto покажет скроллбар, если контент не влезает */
  
  position: relative;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

/* Custom classes used by the Library via props (Table Left Side) */
.gantt-header-row {
  display: flex;
  background: var(--sidebar-bg);
  border-bottom: 1px solid var(--border);
  align-items: center;
  font-weight: 600;
  color: var(--text-soft);
  font-size: 0.85rem;
}

.gantt-table-body { 
  overflow: visible; 
}

.gantt-row {
  display: flex;
  align-items: center;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  transition: background 0.1s;
}
.gantt-row:hover { background: rgba(255,255,255,0.02); }
.gantt-row.row-group { background: rgba(32, 160, 255, 0.03); }

.gantt-cell { padding: 0 12px; display: flex; align-items: center; overflow: hidden; }
.cell-main { flex: 1; min-width: 0; gap: 8px; font-size: 0.9rem; }
.cell-user { width: 120px; flex-shrink: 0; border-left: 1px solid rgba(255,255,255,0.05); }
.cell-status { width: 100px; flex-shrink: 0; border-left: 1px solid rgba(255,255,255,0.05); justify-content: center; }
.expander-icon { color: var(--text-soft); display: flex; margin-right: 4px; }

/* Button Group (View Mode) */
.btn-group {
  display: flex;
  background: var(--sidebar-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2px;
}
.btn-group-item {
  background: transparent;
  border: none;
  color: var(--text-soft);
  padding: 8px 12px;
  font-size: 0.85rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-group-item:hover { color: var(--text); }
.btn-group-item.active { background: var(--card-bg); color: var(--primary); box-shadow: 0 1px 3px rgba(0,0,0,0.2); }


/* ==========================================================================
   GANTT: GLOBAL LIBRARY OVERRIDES (STABLE SELECTORS)
   ========================================================================== */

/* 1. Сетка и Строки (Grid Area) */
/* Фон строк */
.gantt-container .grid .rows rect {
  fill: var(--card-bg) !important;
}
/* Зебра для строк */
.gantt-container .grid .rows rect:nth-child(even) {
  fill: var(--head-bg) !important;
}
/* Линии сетки (горизонтальные и вертикальные) */
.gantt-container .grid .rowLines line,
.gantt-container .grid .ticks line {
  stroke: var(--border) !important;
}
/* Линия "Сегодня" */
.gantt-container .grid .today rect {
  fill: rgba(32, 158, 255, 0.05) !important;
}
/* Линия "Сегодня" - вертикальная черта */
.gantt-container line[stroke-dasharray] { 
  stroke: var(--primary) !important; 
  stroke-width: 2px !important; 
  opacity: 0.6 !important; 
}

/* 2. Календарь (Шапка - Header) */
/* Фон всей шапки */
.gantt-container .calendar > rect {
  fill: var(--sidebar-bg) !important;
  stroke: none !important;
}
/* Текст месяцев и дат */
.gantt-container .calendar text {
  fill: var(--text-soft) !important;
  font-weight: 600 !important;
}
/* Разделительные линии в шапке */
.gantt-container .calendar line {
  stroke: var(--border) !important;
}

/* 3. Задачи (Bars) */
/* Текст названия задачи рядом с полоской */
.gantt-container .bar text {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  fill: var(--text) !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  pointer-events: none !important;
}

/* Скрытие лишних полигонов */
.gantt-container .bar polygon {
  display: none !important;
}

/* Скрытие прозрачных прямоугольников-оберток */
.gantt-container .bar rect[fill="transparent"] {
  display: none !important;
}

/* 4. Ручки управления (Handles для ресайза) */
.gantt-container .handleGroup rect {
  fill: rgba(255, 255, 255, 0.5) !important;
  width: 6px !important;
  height: 22px !important;
  rx: 2px !important;
  ry: 2px !important;
  cursor: ew-resize !important;
  transform: translateY(4px) !important; 
}

.gantt-container .handleGroup polygon {
  display: none !important;
}







































/* ==========================================================================
   9) LOGIN
   ========================================================================== */
.login-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at top, #1b242e 0%, var(--page-bg) 100%);
  padding: 20px;
}
.login-card {
  width: 100%;
  max-width: 400px;
  padding: 40px;
  background: var(--card-bg);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}
.login-logo {
  width: 64px;
  height: 64px;
  background: rgba(32, 160, 255, 0.1);
  color: var(--primary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-top: 24px;
}

.password-toggle-btn {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  color: var(--text-soft);
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}
.password-toggle-btn:hover { color: var(--text); background: rgba(255,255,255,0.05); }

/* ==========================================================================
   10) PROFILE
   ========================================================================== */

.profile-content {
  flex-direction: row;
}



.profile-sidebar {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 150px;
  gap: 16px;
}
.avatar-xl {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), #1a7ab5);
  color: #fff;
  font-size: 2.5rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 24px rgba(32, 160, 255, 0.25);
  border: 4px solid var(--card-bg);
}
.profile-form {
  flex: 1;
  width: 100%;
  max-width: 500px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.alert {
  padding: 12px 16px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.95rem;
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
.alert-error { background: rgba(239, 83, 80, 0.15); color: #ff8a80; border: 1px solid rgba(239, 83, 80, 0.3); }
.alert-success { background: rgba(41, 193, 126, 0.15); color: #69f0ae; border: 1px solid rgba(41, 193, 126, 0.3); }

/* ==========================================================================
   11) TRANSACTIONS / TABLES (Generic)
   ========================================================================== */
.project-col { display: flex; flex-direction: column; }

/* ==========================================================================
   12) RESPONSIVE & UTILS
   ========================================================================== */
@media (max-width: 1200px) {
  .dashboard-analytics-card { width: 100%; }
}

@media (max-width: 768px) {
  .kpi-card { width: 48%; }
  .pd-sidebar { display: none; }
  .unset { display: none; }
  .dashboard-analytics-card { width: 100%; }
}

@media (max-width: 600px) {
  .pd-page { height: auto; overflow: visible; }
  .pd-content { flex-direction: column; height: auto; }
  .projectdetailmain { min-width: 100%;}
  .kpi-row { gap: 16px; }
  .kpi-item { min-width: 100px; }
  .profile-layout { flex-direction: column; align-items: center; }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}